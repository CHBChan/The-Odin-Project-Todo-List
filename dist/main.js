(()=>{function e(e){let t=document.querySelector(".form_name");m.style.display="flex",p.style.display="none",y.style.display="none","project"===e?(t.innerHTML="Create new project",p.style.display="flex"):"task"===e?(t.innerHTML="Create new task",y.style.display="flex"):console.error("Strange occurrence in showForm().")}function t(){m.style.display="none"}function n(){let e=document.querySelector(".project_name"),t=document.querySelector(".task_name"),n=document.querySelector(".task_desc"),l=document.querySelector(".due_date"),r=document.querySelector(".priority");e.value="",t.value="",n.value="",l.value="",r.value=""}function l(){let e=document.querySelector(".project_list");e.innerHTML="",i.forEach((t=>{let n=document.createElement("a");n.setAttribute("class","project-"+t.getTitle()),n.innerHTML=t.getTitle(),n.addEventListener("click",(e=>{r(e.target.className.replace("project-",""))})),e.appendChild(n)}))}function r(t){let n=document.querySelector(".content"),c=i.findIndex((e=>e.getTitle()===t));n.innerHTML="";let a=document.createElement("div");a.setAttribute("class","project_header");let o=document.createElement("div");o.setAttribute("class","wrapper");let d=document.createElement("p");d.setAttribute("class","project_title"),d.innerHTML=t;let s=document.createElement("i");s.setAttribute("class","material-icons"),s.innerHTML="edit",o.appendChild(d),o.appendChild(s);let u=document.createElement("i");u.setAttribute("class","material-icons"),u.innerHTML="delete",u.addEventListener("click",(()=>{i.splice(c,1),l(),n.innerHTML=""})),a.appendChild(o),a.appendChild(u),n.append(a);let m=document.createElement("button");m.setAttribute("class","material-icons add_task"),m.innerHTML="add",m.addEventListener("click",(()=>{e("task")})),n.append(m),function(){let e=document.querySelector(".project_title").innerHTML,t=i.findIndex((t=>t.getTitle()===e)),n=document.querySelector(".content");i[t].getTasks().forEach((l=>{let c=document.createElement("div");c.setAttribute("class","task-"+l.getTitle());let a=document.createElement("i");a.setAttribute("class","material-icons"),l.getCompletion()?a.innerHTML="check_box":a.innerHTML="check_box_outline_blank",a.addEventListener("click",(()=>{a.innerHTML="check_box",l.completeTask()}));let o=document.createElement("div");o.setAttribute("class","task_item_name_desc");let d=document.createElement("p");if(d.setAttribute("class","task_item_name"),d.innerHTML=l.getTitle(),o.appendChild(d),l.getDesc()){let e=document.createElement("p");e.setAttribute("class","task_item_desc"),e.innerHTML=l.getDesc(),o.appendChild(e)}let s=document.createElement("p");s.setAttribute("class","task_item_due_date"),s.innerHTML=`Due: ${l.getDueDate()}`,c.classList.add(l.getPriority());let u=document.createElement("i");u.setAttribute("class","material-icons"),u.innerHTML="edit";let m=document.createElement("i");m.setAttribute("class","material-icons"),m.classList.add("right"),m.innerHTML="close",m.addEventListener("click",(()=>{i[t].removeTask(l.getTitle()),r(e)})),c.appendChild(a),c.appendChild(o),c.appendChild(s),c.appendChild(u),c.appendChild(m),n.appendChild(c)}))}()}const c=(e,t,n,l)=>{let r=!1;return{getTitle:()=>e,getDesc:()=>t,getDueDate:()=>n,getPriority:()=>l,getCompletion:()=>r,completeTask:()=>{r=!0}}};let i;i=localStorage.project_list?localStorage.project_list:[];let a=document.querySelector(".expand"),o=document.querySelector(".sidebar"),d=document.querySelector(".content"),s="250px",u=!1;a.addEventListener("click",(()=>{u?(o.style.width=0,d.style.marginLeft=0):(o.style.width=s,d.style.marginLeft=s),u=!u}));let m=document.querySelector(".modal"),p=document.querySelector(".project_form"),y=document.querySelector(".task_form");m.addEventListener("click",(e=>{"modal"===e.target.className&&(t(),n())})),document.querySelector(".add_project").addEventListener("click",(()=>{e("project")})),document.querySelector(".submit").addEventListener("click",(()=>{if("none"!=p.style.display){let e=document.querySelector(".project_name").value;if(e.length<1)return void alert("The project name must have at least one character.");if(i.find((t=>t.getTitle()===e)))return void alert("This project name already exists.")}else if("none"!=y.style.display){let e=document.querySelector(".project_title").innerHTML,t=i.findIndex((t=>t.getTitle()===e)),n=document.querySelector(".task_name").value,l=document.querySelector(".due_date").value,r=document.querySelector(".priority").value;if(n.length<1)return void alert("The task name must have at least one character.");if(i[t].getTasks().find((e=>e.getTitle()===n)))return void alert("This task name already exists in this project.");if(!isNaN(l))return void alert("The date entered is invalid.");if(!r)return void alert("Please select the task priority.")}!function(){if("none"!=p.style.display){let e=(e=>{let t=[];return{getTitle:()=>e,getTasks:()=>t,addTask:(e,n,l,r)=>{let i=c(e,n,l,r);t.push(i)},removeTask:e=>{let n=t.findIndex((t=>t.getTitle()===e));t.splice(n,1)},findTask:e=>t.find((t=>t.getTitle()===e)),editTitle:t=>{e=t}}})(document.querySelector(".project_name").value);i.push(e),l()}else if("none"!=y.style.display){let e=document.querySelector(".project_title").innerHTML,t=i.findIndex((t=>t.getTitle()===e)),n=document.querySelector(".task_name").value,l=document.querySelector(".task_desc").value,c=document.querySelector(".due_date").value,a=document.querySelector(".priority").value;i[t].addTask(n,l,c,a),r(e)}else console.error("Strange occurrence in createNew().");t(),n()}()}))})();